# -----------------------------------------------------------------------------
#  This confidential and proprietary software may be used only as authorized
#  by a licensing agreement from ARM Limited.
#          (C) COPYRIGHT 2010-2011 ARM Limited, ALL RIGHTS RESERVED
#  The entire notice above must be reproduced on all authorized copies and
#  copies may only be made to the extent permitted by a licensing agreement
#  from ARM Limited.
# -----------------------------------------------------------------------------

import os

Import( "env", "hostenv" )

rBuildArch = env['arch']
rBuildOS = env['os']

if 'winsys' in env:
	rBuildWindowSystem = env['winsys']
else:
	rBuildWindowSystem = '0'

# -----------------------------------------------------------------------------
# Actually run the build of the TPI library
# -----------------------------------------------------------------------------

Export( "rBuildArch", "rBuildOS", "rBuildWindowSystem" )
SConscript( "src/sconscript" )

if os.path.exists(env.File(os.path.join( "#tpi", "example", "sconscript" )).abspath):
	SConscript( "example/sconscript" )

if env['unit'] == '1':
	# And build the unit_tests
	SConscript( "unit_tests/sconscript" )
